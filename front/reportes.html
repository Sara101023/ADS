<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Punto de Venta - Reportes</title>
    <link rel="stylesheet" href="css/estilos.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<style>
     /* Estilos para la vista de reportes */

  .table-container {
    overflow-x: auto;
    width: 100%;
  }

  .data-table {
    min-width: 1000px;
    border-collapse: collapse;
    width: 100%;
    table-layout: fixed;
  }

  .data-table th, .data-table td {
     padding: 8px 12px;
     text-align: left;
     white-space: normal;          /* ✅ Permite saltos de línea */
    word-break: break-word;       /* ✅ Rompe palabras largas */
    overflow-wrap: break-word;    /* ✅ Permite dividir contenido sin romper diseño */
    vertical-align: top; 
  }

/* Filtros de reportes */
.table-container {
    overflow-x: auto;
    width: 100%;
}

.data-table {
    min-width: 1000px;
    border-collapse: collapse;
    width: 100%;
}

.report-filters {
    background-color: white;
    border-radius: 8px;
    padding: 20px;
    margin-bottom: 20px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
}

.filter-section {
    margin-bottom: 20px;
}

.filter-section h3 {
    font-size: 1rem;
    color: var(--secondary-color);
    margin-bottom: 10px;
}

.frequency-buttons {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
}

.frequency-btn {
    padding: 8px 12px;
    background-color: #f8f9fa;
    border: 1px solid #ddd;
    border-radius: 4px;
    cursor: pointer;
    font-size: 0.9rem;
    transition: all 0.3s;
}

.frequency-btn:hover {
    background-color: #e9ecef;
}

.frequency-btn.active {
    background-color: var(--accent-color);
    color: white;
    border-color: var(--accent-color);
}

.date-range-picker {
    display: flex;
    align-items: center;
    gap: 10px;
}

.date-range-picker span {
    color: #6c757d;
}

.additional-filters {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 15px;
}

.filter-actions {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    margin-top: 20px;
}

/* Resumen de reportes */
.report-summary {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 20px;
    margin-bottom: 20px;
}

.summary-card {
    background-color: white;
    border-radius: 8px;
    padding: 15px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
}

.summary-card h4 {
    font-size: 0.9rem;
    color: #6c757d;
    margin-bottom: 10px;
}

.summary-value {
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--dark-color);
    margin-bottom: 5px;
}

.summary-value span {
    font-size: 0.9rem;
    color: #6c757d;
    font-weight: normal;
}

.summary-detail {
    display: flex;
    flex-direction: column;
    font-size: 0.9rem;
    color: #6c757d;
    gap: 3px;
}

/* Pestañas de reportes */
.report-tabs {
    background-color: white;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    overflow: hidden;
}

.tabs-header {
    display: flex;
    border-bottom: 1px solid #eee;
}

.tab-btn {
    padding: 12px 20px;
    background: none;
    border: none;
    cursor: pointer;
    font-size: 0.9rem;
    color: #6c757d;
    position: relative;
}

.tab-btn:after {
    content: '';
    position: absolute;
    bottom: -1px;
    left: 0;
    width: 100%;
    height: 2px;
    background-color: transparent;
    transition: background-color 0.3s;
}

.tab-btn:hover {
    color: var(--dark-color);
}

.tab-btn.active {
    color: var(--accent-color);
    font-weight: 500;
}

.tab-btn.active:after {
    background-color: var(--accent-color);
}

.tabs-content {
    padding: 20px;
}

.tab-pane {
    display: none;
}

.tab-pane.active {
    display: block;
}

/* Gráficos */
.chart-container {
    height: 300px;
    margin-bottom: 20px;
}

/* Botones de exportación */
.export-buttons {
    display: flex;
    gap: 10px;
}

.btn-danger {
    background-color: var(--danger-color);
    color: white;
}

.btn-success {
    background-color: var(--success-color);
    color: white;
}

/* Responsive */
@media (max-width: 768px) {
    .additional-filters {
        grid-template-columns: 1fr;
    }
    
    .report-summary {
        grid-template-columns: 1fr;
    }
    
    .tabs-header {
        overflow-x: auto;
        white-space: nowrap;
    }
    
    .export-buttons {
        flex-direction: column;
        width: 100%;
    }
}
</style>
</head>
<body>
    <div class="dashboard-container">
        <aside class="sidebar">
            <div class="logo">
                <img src="css/logo.png" alt="Logo Tienda">
                <h2>Mi Tienda</h2>
            </div>
            <nav class="menu">
                <ul>
                    <li><a href="index.html"><i class="icon fas fa-chart-line"></i>General</a></li>
                    <li><a href="inventario.html"><i class="icon fas fa-boxes"></i>Inventario</a></li>
                    <li class="active"><a href="reportes.html"><i class="icon fas fa-chart-pie"></i>Reportes</a></li>
                    <li><a href="promociones.html"><i class="icon fas fa-tag"></i>Promociones</a></li>
                    <li><a href="usuarios.html"><i class="icon fas fa-users"></i>Usuarios</a></li>
                </ul>
            </nav>
            <div class="user-profile">
                <img src="css/usuario.webp" alt="Usuario">
                <span>Administrador</span>
                <button id="logout-btn">Cerrar sesión</button>
            </div>
        </aside>

        <main class="main-content">
            <header class="header">
                <h1>Reportes</h1>
                <div class="export-buttons">
                    <button id="export-pdf" class="btn-danger">
                        <i class="fas fa-file-pdf"></i> Exportar PDF
                    </button>
                    <button id="export-csv" class="btn-success">
                        <i class="fas fa-file-csv"></i> Exportar CSV
                    </button>
                </div>
            </header>

            <div id="filtros-ventas">
                <div class="filter-section">
                    <h3>Tipo de Reporte</h3>
                    
                    <div class="filter-group">
                        <select id="report-type" class="form-control">
                            <option value="ventas">Reporte de Ventas</option>
                            <option value="inventario">Reporte de Inventario</option>
                        </select>
                    </div>
                </div>

                <div class="filter-section">
                    <h3>Frecuencia</h3>
                    <div class="frequency-buttons">
                        <button class="frequency-btn active" data-frequency="daily">Diario</button>
                        <button class="frequency-btn" data-frequency="biweekly">Quincenal</button>
                        <button class="frequency-btn" data-frequency="monthly">Mensual</button>
                        <button class="frequency-btn" data-frequency="quarterly">Trimestral</button>
                        <button class="frequency-btn" data-frequency="custom">Personalizado</button>
                    </div>
                </div>

                <div class="filter-section" id="custom-date-range" style="display: none;">
                    <h3>Rango de Fechas</h3>
                    <div class="date-range-picker">
                        <input type="text" id="start-date" class="form-control datepicker" placeholder="Fecha inicio">
                        <span>a</span>
                        <input type="text" id="end-date" class="form-control datepicker" placeholder="Fecha fin">
                    </div>
                </div>

                <div class="filter-section">
                    <h3>Filtros Adicionales</h3>
                    <div class="additional-filters">

                        <div class="filter-group">

                            <label for="provider-filter">Proveedor:</label>
                            <select id="provider-filter" class="form-control">
                                <option value="all">Todos</option>
                            </select>
                        </div>
                      
                        <div class="filter-group">
                            <label for="category-filter">Categoría:</label>
                            <select id="category-filter" class="form-control">
                                <option value="all">Todas</option>
                                <option value="Bebidas">Bebidas</option>
                                <option value="Botanas">Botanas</option>
                                <option value="Limpieza">Limpieza</option>
                                <option value="Panadería">Panadería</option>
                                <option value="Lácteos">Lácteos</option>
                                <option value="Enlatados">Enlatados</option>
                                <option value="Dulces">Dulces</option>
                                <option value="Abarrotes">Abarrotes</option>
                                <option value="Cereales">Cereales</option>
                                <option value="Carnes">Carnes</option>  
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="payment-filter">Método de pago:</label>
                            <select id="payment-filter" class="form-control">
                                <option value="all">Todos</option>
                                <option value="efectivo">Efectivo</option>
                                <option value="tarjeta">Tarjeta</option>
                                </select>
                        </div>
                    </div>
                </div>

                <div class="filter-actions">
                    <button id="generate-report" class="btn-primary">
                        <i class="fas fa-sync-alt"></i> Generar Reporte
                    </button>
                    <button id="reset-filters" class="btn-secondary">
                        <i class="fas fa-broom"></i> Limpiar Filtros
                    </button>
                </div>
            </div>

            <div id="tabla-inventario" style="display: none;">
  <div class="table-container">
    <table class="data-table">
      <thead>
        <tr>
          <th>Producto</th>
          <th>Categoría</th>
          <th>Stock</th>
          <th>Precio</th>
          <th>Proveedor</th>
        </tr>
      </thead>
      <tbody>
        <!-- Aquí se insertarán los datos dinámicamente -->
      </tbody>
    </table>
  </div>
</div>

               
        

            <div class="report-results">
                <div class="report-summary">

                   <!-- Ventas Totales -->
                    <div class="summary-card">
                        <h4>Ventas Totales</h4>
                        <div class="summary-value"><span>MXN</span></div>
                        <div class="summary-detail">
                            <span>Subtotal: <span id="resumen-subtotal">$0.00</span></span>
                            <span>IVA: <span id="resumen-iva">$0.00</span></span>
                        </div>
                    </div>

                  <!-- Transacciones -->
                    <div class="summary-card">
                        <h4>Transacciones</h4>
                         <div class="summary-value"><span id="resumen-transacciones">0</span> <span>ventas</span></div>
                         <div class="summary-detail" id="resumen-metodos">
                         <!-- Aquí se insertarán Efectivo: X, Tarjeta: Y -->
                        </div>
                    </div>

                         

                  <!-- Productos Vendidos -->
                    <div class="summary-card">
                     <h4>Productos Vendidos</h4>
                        <div class="summary-value"><span id="resumen-unidades">0</span> <span>unidades</span></div>
                         <div class="summary-detail" id="resumen-categorias">
                        <!-- Aquí se insertarán categorías dinámicamente -->
                        </div>
                    </div>
                </div>




                 <button class="tab-btn active" data-tab="sales-data">Datos de Ventas</button>
                        <button class="tab-btn" data-tab="top-products">Productos Más Vendidos</button>
                        <button class="tab-btn" data-tab="payment-methods">Métodos de Pago</button>
                        <button class="tab-btn" data-tab="comparison">Comparativa</button>
                    </div>
                        <div id="sales-data" class="tab-pane active">
                            <div class="table-container">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th>Folio</th>
                                            <th>Fecha/Hora</th>
                                            <th>Productos</th>
                                            <th>Cantidad</th>
                                            <th>P. Unitario</th>
                                            <th>Subtotal</th>
                                            <th>IVA</th>
                                            <th>Total</th>
                                            <th>Método Pago</th>
                                            <th>Descuento</th>
                                            <th>Categoría</th>
                                        </tr>
                                    </thead>
                                    <tbody>                                   
                                        <!-- Más filas se generarán dinámicamente -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div id="top-products" class="tab-pane">
                            <div class="chart-container">
                                <canvas id="topProductsChart"></canvas>
                            </div>
                            <div class="table-container">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th>Producto</th>
                                            <th>Categoría</th>
                                            <th>Unidades Vendidas</th>
                                            <th>Ingresos Generados</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                    
                                        <!-- Más filas se generarán dinámicamente -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div id="payment-methods" class="tab-pane">
                            <div class="chart-container">
                                <canvas id="paymentMethodsChart"></canvas>
                            </div>
                        </div>
                        <div id="comparison" class="tab-pane">
                            <div class="chart-container">
                                <canvas id="comparisonChart"></canvas>
                            </div>
                        </div>
                </div>


             
            </div>
        </main>
    </div>

    <script src="js/main.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/reportes.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/es.js"></script>
</body>
</html>

